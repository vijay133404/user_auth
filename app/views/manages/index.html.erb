<div class="container">
  <p id="notice"><%= notice %></p>

  <h1>Listing User</h1>

<table class = "table table-hover">
  <thead>
    <tr>
      <th>FirstName</th>
       <th>Lastname</th>
      <th>Email</th>
      <th>Company</th>
      <th>Role</th>
      <th>Startdate</th>
      <th>Enddate</th>
      <th>MonthlyCharge</th>

      <th>Notes</th>
      <th>Image</th>
      <th>Active</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @manages.each do |manage| %>
      <tr>
        <td><%= manage.first_name %></td>
        <td><%= manage.last_name %></td>
        <td><%= manage.email %></td>
        <td><%if manage.company_id.present?%>
        <%= Company.find(manage.company_id).name %>
        <% end %>
        </td>
        <td>
        <%if manage.company_id.present?%>
        <%= UserRole.find(manage.role_id).role_name %>
        <% end %></td>
         
        <td><%= manage.start_date %></td>
        <td><%= manage.end_date %></td>
        <td><%= manage.monthly_charge %></td>
        <td><%= manage.notes%></td>
        <td><%= manage.image_id%></td>
        <td><%= manage.active %></td>
        <td><%= link_to 'Show', manage_path(manage), :class=>"btn btn-success" %></td>
         <td>
         <% if user_permission_admin? %>
          <td><%= link_to 'Edit', edit_manage_path(manage), :class=>"btn btn-success"%></td>
             <% elsif  user_check(manage, current_user) %>
              <td><%= link_to 'Edit', edit_manage_path(manage), :class=>"btn btn-success"%></td>
               <% elsif  user_permission_check(manage, current_user) %>
              <td><%= link_to 'Edit', edit_manage_path(manage), :class=>"btn btn-success"%></td>

          <% end%>
        
        <td><%= link_to 'Destroy',"/manages/#{manage.id}",
              method: :delete,
              data: { confirm: 'Are you sure?' }, :class=>"btn btn-success" %></td>
      </tr> 
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New add user', new_manage_path,:class=>"btn btn-success" %>
</div>